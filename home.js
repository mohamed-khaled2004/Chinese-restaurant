let products = {
    pizzas: {
      title: "pizzaa",
      img: "./imgas/z-1.png",
      categoryName: "pizzas",
      productecate: [
        {
          name: "Crispy Crust Delights",
          price: 120,
          img: "./imgas/z-1.png",
        },
        {
          name: "The Pizzaioloâ€™s Palette",
          price: 190,
          img: "./imgas/z-2.png",
        },
        {
          name: "Oven-Fired Elegance",
          price: 120,
          img: "./imgas/z-3.png",
        },
        {
          name: "City Pizza",
          price: 150,
          img: "./imgas/z-4.png",
        },
        {
          name: "Dough Dreams Pizzas",
          price: 110,
          img: "./imgas/z-5.png",
        },
        {
          name: "Pizza Connection",
          price: 110,
          img: "./imgas/z-6.png",
        },
        {
          name: "Pizza Dough You Know",
          price: 110,
          img: "./imgas/z-7.png",
        },
        {
          name: "Pizzazz Pizzeria",
          price: 110,
          img: "./imgas/z-8.png",
        },
      ],
    },
    Burgers: {
      title: "Burgers",
      categoryName: "Burgers",
      img: "./imgas/b8.png",
      productecate: [
        {
          name: "Hamburger",
          price: 120,
          img: "./imgas/b1.png",
        },
        {
          name: "Turkey Burger",
          price: 190,
          img: "./imgas/b2.png",
        },
        {
          name: "Classic Burger",
          price: 120,
          img: "./imgas/b3.png",
        },
        {
          name: "Lamb Burger",
          price: 150,
          img: "./imgas/b4.png",
        },
        {
          name: "Chicken Burger",
          price: 110,
          img: "./imgas/b5.png",
        },
        {
          name: "Specialty Burger",
          price: 110,
          img: "./imgas/b6.png",
        },
        {
          name: "Cheese Burger",
          price: 110,
          img: "./imgas/b7.png",
        },
        {
          name: "Veggie Burger",
          price: 110,
          img: "./imgas/b8.png",
        },
      ],
    },
    drinks: {
      title: "drinks",
      categoryName: "drinks",
      img: "./imgas/d-2.png",
      productecate: [
        {
          name: "Glass with fruit ice tea",
          price:100,
          img: "./imgas/d-1.png",
        },
        {
          name: "Milky smoothie with ",
          price: 120,
          img: "./imgas/d-2.png",
        },
        {
          name: "v cola",
          price: 123,
          img: "./imgas/d-3.png",
        },
        {
          name: "Cocktail with lemon slices",
          price: 144,
          img: "./imgas/d-4.png",
        },
        {
          name: "Cold coffee frappe cream",
          price: 70,
          img: "./imgas/d-5.png",
        },
        {
          name: "Classic cooling mojito",
          price: 66,
          img: "./imgas/d-6.png",
        },
        {
          name: "cocktail oranges and apples",
          price: 130,
          img: "./imgas/d-7.png",
        },
        {
          name: "Classic cooling mojito",
          price: 150,
          img: "./imgas/d-6.png",
        },
      ],
    },
    desserts: {
      title: "desserts",
      categoryName: "desserts",
      img: "./imgas/s-3.png",
      productecate: [
        {
          name: "Cakes",
          price: 120,
          img: "./imgas/s-1.png",
        },
        {
          name: "Cookies",
          price: 190,
          img: "./imgas/s-2.png",
        },
        {
          name: " Biscuits",
          price: 120,
          img: "./imgas/s-3.png",
        },
        {
          name: "Pastries",
          price: 150,
          img: "./imgas/s-4.png",
        },
        {
          name: "Custards and Puddings",
          price: 110,
          img: "./imgas/s-5.png",
        },
        {
          name: " Candies",
          price: 110,
          img: "./imgas/s-6.png",
        },
        {
          name: "Deep-fried",
          price: 110,
          img: "./imgas/s-7.png",
        },
        {
          name: "Frozen",
          price: 110,
          img: "./imgas/s-8.png",
        },
      ],
    },
    wok: {
      title: "wok",
      categoryName: "wok",
      img: "./imgas/wok-7.png",
      productecate: [
        {
          name: "Quick Chicken Lo Mein",
          price: 120,
          img: "./imgas/wok-1.png",
        },
        {
          name: "Pineapple Pork Stir-Fry",
          price: 190,
          img: "./imgas/wok-2.png",
        },
        {
          name: "Hamburger Stir-Fry",
          price: 120,
          img: "./imgas/wok-3.png",
        },
        {
          name: "Sesame Chicken Stir-Fry",
          price: 150,
          img: "./imgas/wok-4.png",
        },
        {
          name: "Mushroom Pepper Steak",
          price: 110,
          img: "./imgas/wok-5.png",
        },
        {
          name: "Sweet-and-Sour Pork",
          price: 110,
          img: "./imgas/wok-6.png",
        },
        {
          name: "Easy Pad Thai",
          price: 110,
          img: "./imgas/wok-7.png",
        },
        {
          name: "Steak Stir-Fry",
          price: 110,
          img: "./imgas/wok-8.png",
        },
      ],
    },
    pasta: {
      title: "pasta",
      categoryName: "pasta",
      img: "./imgas/ps-2.png",
      productecate: [
        {
          name: "Bow Tie Pasta",
          price: 120,
          img: "./imgas/ps-1.png",
        },
        {
          name: " Bucatini Pasta",
          price: 190,
          img: "./imgas/ps-2.png",
        },
        {
          name: " Ditalini Pasta",
          price: 120,
          img: "./imgas/ps-3.png",
        },
        {
          name: "Egg Noodles",
          price: 150,
          img: "./imgas/ps-4.png",
        },
        {
          name: "Fettuccine Pasta",
          price: 110,
          img: "./imgas/ps-5.png",
        },
        {
          name: "Fusilli Pasta",
          price: 110,
          img: "./imgas/ps-6.png",
        },
        {
          name: "Gemelli Pasta",
          price: 110,
          img: "./imgas/ps-7.png",
        },
        {
          name: "Linguine",
          price: 110,
          img: "./imgas/ps-8.png",
        },
      ],
    },
  };
  
  let cart = [];
  let catsDiv = document.querySelector("#productCats");
  let cats = Object.values(products);
  cats.forEach(el => {
    catsDiv.innerHTML += `<button onclick="renderProducts('${el.categoryName}')  " class=" w-m  btn btn-hove card rounded-4 border-0  p-3  m-2 d-flex flex-column gap-3 fs-3 Gilroy-Medium justify-content-center align-items-center "> <img class="w-g" src="${el.img}"/>${el.categoryName}  </button>`;
  });
  
  
  
  let productsDiv = document.querySelector("#products");
  function renderProducts(catName) {
    let productsToFetch = products[catName].productecate;
    productsDiv.innerHTML = "";
  
    productsToFetch.forEach((el, index) => {
      productsDiv.innerHTML += `
      <div class="Gilroy-Medium  fs-4" >
      <div type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasScrolling"aria-controls="offcanvasScrolling" class="card btn-hove1 animate__animated animate__pulse  "onclick="addToCart('${catName}',${index})" style="width: 18rem">
      <img src="${el.img}" class="card-img-top w-g container object-fit-contain " alt="..." />
      <div class="card-body">
      <h5 class="card-title text-center">${el.name}</h5>
      <p class=" color-1 text-center">${el.price / 50}$</p>
      <p class="card-text text-center">${el.price} EGP</p>
      </div>
      </div>
      `;
    });
  }
  
  let div = document.querySelector("#cart");
  
  renderCart();
  
  function renderCart() {
    div.innerHTML = "";
    cart.forEach((el, index) => {
      div.innerHTML += `
                        <div>
                        <button class="btn" onclick="delProduct(${index})"><i class="fa-solid fa-xmark"></i></button>
                      <div class="d-flex justify-content-center align-items-center flex-column ">
                        <img class="w-m" src="${el.img}" alt="">
                      </div>
                      <div class=" text-center">
                        <h1>
                          ${el.name}
                        </h1>
                        <p>${el.price}</p>
  
                      </div>
                      <div>
                        <div>
                          <img src="" alt="">
                          <p></p>
                        </div>
                        <div class=" d-flex justify-content-center align-items-center gap-2">
                          <button class="btn btn-light" onclick="decrement(${index})">-</button>
                          <p class=" p-2"> X${el.qty}</p>
                          <button class="btn btn-col0 " onclick="incement(${index})">+</button>
                        </div>
                        </div>
                        </div>
  
      `;
    });
  
    let sum = 0;
    cart.forEach(el => {
      let x = +el.price * +el.qty;
      sum += x;
    });
    
    let TotalCell = document.querySelector("#Total");
    
    TotalCell.innerText = sum;
  }
  function incement(index) {
    cart[index].qty++;
    renderCart();
  }
  function decrement(index) {
    if (cart[index].qty > 1) {
      cart[index].qty--;
    }
    else{
      cart.splice(index,1);
    }
    renderCart();
  }
  
  
  
  function delProduct(index) {
    cart.splice(index, 1);
    renderCart();
  }
  function addToCart(key, index) {
    // Check if category exists before accessing products[key]
    if (products.hasOwnProperty(key)) {
      let obj = products[key].productecate[index];
      let isVaild = cart.findIndex(el => el.name === obj.name); // Use strict equality (===)
  
      if (isVaild == -1) {
        // Use loose equality (==) for index comparison
        obj.qty = 1;
        cart.push(obj);
      } else {
        cart[isVaild].qty++;
      }
      renderCart();
    }
  }